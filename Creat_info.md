# ğŸ¼ ê³¡ ìƒì„± í˜ì´ì§€ ì¸ìˆ˜ì¸ê³„ ë¬¸ì„œ (`Create.jsx`, `GetStarted.jsx`, `LyricChatBot.js`, `MelodyChatBot.js`)

## 1. ê°œìš”

ê³¡ì„ ìƒì„±í•˜ëŠ” ì „ì²´ í”Œë¡œìš°ë¥¼ ë‹´ë‹¹í•˜ëŠ” í˜ì´ì§€ ë° ì»´í¬ë„ŒíŠ¸ êµ¬ì„±ì— ëŒ€í•œ ì¸ìˆ˜ì¸ê³„ ë¬¸ì„œì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” **ê°€ì‚¬ ìƒì„± â†’ ë©œë¡œë”” ìƒì„± â†’ ì•¨ë²” ì»¤ë²„ â†’ ìµœì¢… í™•ì¸**ì˜ ë‹¨ê³„ë¥¼ ê±°ì¹˜ë©°, `chatbot` ë˜ëŠ” `select` ëª¨ë“œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

---

## 2. ğŸ“‚ ì£¼ìš” íŒŒì¼ ê²½ë¡œ ë° ì—­í• 

| íŒŒì¼ëª…                                       | ì„¤ëª…                                            |
| -------------------------------------------- | ----------------------------------------------- |
| `pages/Create.jsx`                           | ì „ì²´ ê³¡ ìƒì„± í”Œë¡œìš° ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸               |
| `components/create/GetStarted.jsx`           | ì‹œì‘ í™”ë©´ ì»´í¬ë„ŒíŠ¸ (ì–¸ì–´/ëª¨ë“œ/ë²„ì „ ì„ íƒ)        |
| `components/create/LyricLab.jsx`             | ê°€ì‚¬ ìƒì„± ë¼ë²¨ë§ ì»´í¬ë„ŒíŠ¸                       |
| `components/create/MelodyMaker.jsx`          | ë©œë¡œë”” ìƒì„± ë¼ë²¨ë§ ì»´í¬ë„ŒíŠ¸                     |
| `components/create/chatbot/LyricChatBot.js`  | GPT ê¸°ë°˜ ê°€ì‚¬ ìƒì„± ì±—ë´‡ ì»´í¬ë„ŒíŠ¸                |
| `components/create/chatbot/MelodyChatBot.js` | GPT ê¸°ë°˜ ë©œë¡œë”” ìƒì„± ë° ìµœì¢… ìƒì„± ìš”ì²­ ì»´í¬ë„ŒíŠ¸ |

---

## 3. ğŸ” í˜ì´ì§€ í”Œë¡œìš° ë‹¨ìˆœ ìš”ì•½

```text
1. GetStarted (ì‹œì‘í™”ë©´) (chatbot or select mode ì„ íƒ)
2. ê°€ì‚¬ ìƒì„± (LyricChatBot ë˜ëŠ” LyricLab)
2.5 BGM ëª¨ë“œì‹œ ê°€ì‚¬ ìƒì„± ë¶€ë¶„ ìŠ¤í‚µ
3. ë©œë¡œë”” ìƒì„± (MelodyChatBot ë˜ëŠ” MelodyMaker)
4. ë©œë¡œë”” ìƒì„± íŒŒì¼ì—ì„œ ì•¨ë²” ì»¤ë²„ ë° ìµœì¢… ìƒì„± ìš”ì²­ì´ ì§„í–‰ë©ë‹ˆë‹¤.
```

---

## 4. ì»´í¬ë„ŒíŠ¸ë³„ ê¸°ëŠ¥ ìš”ì•½

### (ì±—ë´‡ëª¨ë“œ ì„ íƒì‹œ) ğŸ§  LyricChatBot

- GPT ê¸°ë°˜ ê°€ì‚¬ ìƒì„± (chatGPT API ì‚¬ìš©)
- ëŒ€í™”í˜• UIë¡œ ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬
- ê°€ì‚¬ ê²°ê³¼ í™•ì¸ ë° ìˆ˜ì • ëª¨ë“œ ì§€ì› (read/edit)
- `.txt`, `.pdf` í¬ë§·ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì œê³µ

### (ì±—ë´‡ëª¨ë“œ ì„ íƒì‹œ) ğŸ¶ MelodyChatBot

- ê°€ì‚¬ ê¸°ë°˜ ë©œë¡œë”” ì •ë³´ ì¶”ì¶œ ë° ì…ë ¥ ì§€ì›
- GPT ì‘ë‹µì—ì„œ ì£¼ìš” ì •ë³´(íƒœê·¸, ì¥ë¥´, í…œí¬ ë“±) íŒŒì‹±
- í”„ë¡¬í”„íŠ¸ ìƒì„± â†’ ì•¨ë²” ì»¤ë²„ ìƒì„± â†’ ìŒì•… ìƒì„± API í˜¸ì¶œ
- ìƒì„± ì™„ë£Œ ì‹œ ì•¨ë²” IDë¥¼ localStorageì— ì €ì¥

### (ë¼ë²¨ë§ëª¨ë“œ ì„ íƒì‹œ) ğŸ¶ LyricLab

- ê°€ì‚¬ ìƒì„± ë¼ë²¨ë§ ì»´í¬ë„ŒíŠ¸

### (ë¼ë²¨ë§ëª¨ë“œ ì„ íƒì‹œ) ğŸ¶ MelodyLab

- ë©œë¡œë”” ìƒì„± ë¼ë²¨ë§ ì»´í¬ë„ŒíŠ¸

---

## 5. ğŸ”‘ ì±—ë´‡ í˜ì´ì§€ í”Œë¡œìš° ìƒì„¸

ì±—ë´‡ì— ì¶œë ¥ë˜ëŠ” ì–¸ì–´ëŠ” ë©”ë‰´ì—ì„œ ì„ íƒ ëœ ì–¸ì–´ì— ë”°ë¼ ì¶œë ¥ë©ë‹ˆë‹¤.

### lyricChatBot.js

1. ì´ˆê¸° ë Œë” â†’ ì±—ë´‡ ë©”ì‹œì§€ ì‹œì‘
2. ì‚¬ìš©ì ì…ë ¥ â†’ ë©”ì‹œì§€ ì¶”ê°€ â†’ GPT API ìš”ì²­
3. ì‘ë‹µ ë„ì°© â†’ chatHistory ë° generatedLyric ê°±ì‹ 
4. "Confirm" í´ë¦­ â†’ isStatus = trueë¡œ ì „í™˜
5. ê°€ì‚¬ í™•ì¸/í¸ì§‘ â†’ í¸ì§‘ í›„ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì „í™˜ or íŒŒì¼ ë‹¤ìš´ë¡œë“œ

### melodyChatBot.js

1. [ì‚¬ìš©ì ì…ë ¥]
   â”‚
   â”œâ”€> ì…ë ¥ë€ì—ì„œ í…ìŠ¤íŠ¸ ì‘ì„±
   â””â”€> [Enter] ë˜ëŠ” [Send] ë²„íŠ¼ í´ë¦­ ì‹œ
   â†“
   handleSendMessage()
   â†“
   chatHistoryì— user ë©”ì‹œì§€ ì¶”ê°€
   â†“
   getChatResponse() í˜¸ì¶œ
   â†“
   GPT-4.1-nano API ìš”ì²­
   â†“
   assistant ì‘ë‹µ â†’ botMessage ì €ì¥
   â†“
   locale.extraction ì •ê·œì‹ìœ¼ë¡œ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ:
   â”œâ”€ melody_tag
   â”œâ”€ melody_title
   â”œâ”€ melody_genre
   â”œâ”€ melody_gender (song ëª¨ë“œì¼ ë•Œ)
   â”œâ”€ melody_instrument
   â”œâ”€ melody_tempo
   â”œâ”€ melody_detail
   â””â”€ melody_introduction
   â†“
   ì¶”ì¶œê°’ â†’ setMelodyData()

2. [UIì— ì •ë³´ í‘œì‹œ]
   â”œâ”€ Chat UI (ëŒ€í™” ìŠ¤ë ˆë“œ í‘œì‹œ)
   â””â”€ Melody Info UI (ê³¡ ì •ë³´ ì½ê¸° ì „ìš© input)

3. [ì‚¬ìš©ì: Generate Song í´ë¦­]
   â”‚
   â”œâ”€ ë²„íŠ¼ ì¡°ê±´ ì²´í¬ (melody_title ìœ ë¬´)
   â””â”€ handleGenerateSong() ì‹¤í–‰
   â†“

   1. generateFinalPrompt() í˜¸ì¶œ
      â””â”€ GPT ì‚¬ìš©í•´ í•œ ì¤„ í”„ë¡¬í”„íŠ¸ ìƒì„±
   2. generateAlbumCover() í˜¸ì¶œ
      â””â”€ DALLÂ·E 3 ì‚¬ìš©í•´ ì»¤ë²„ ì´ë¯¸ì§€ ìƒì„±
   3. musicGenerate() í˜¸ì¶œ
      â””â”€ AI ëª¨ë¸ì— ë”°ë¼ ì„œë²„ë¡œ formData POST ìš”ì²­
      â†“
      ìƒì„±ëœ ì•¨ë²” ID â†’ localStorage ì €ì¥
      navigate('/') ë¡œ í™ˆ ì´ë™

---

## 6. ì£¼ìš” ì²˜ë¦¬ ë¡œì§ ìš”ì•½

### ê³µí†µ ì²˜ë¦¬

- GPT ëª¨ë¸: `gpt-4.1-nano`
- ì–¸ì–´ë³„ locale ì ìš© (KOR/ENG/IDN)
- ì…ë ¥ â†’ chatHistory â†’ GPT ìš”ì²­ â†’ ì‘ë‹µ íŒŒì‹±

### MelodyChatBot.js ì „ìš©

1. `generateFinalPrompt()` : ì˜ì–´ í”„ë¡¬í”„íŠ¸ ìƒì„± (ìˆ˜ë…¸ì—ì„œëŠ” ê¸¸ì´ ì œí•œ ì—†ì§€ë§Œ ê¸°ë³¸ 200ì ì œí•œ)
2. `generateAlbumCover()` : DALLÂ·E ê¸°ë°˜ ì´ë¯¸ì§€ ìƒì„±
3. `musicGenerate()` : `/api/music/v2/album/` or `/api/music/v2/album/bgm/` API í˜¸ì¶œ

---

## 7. ì˜ˆì™¸ ì²˜ë¦¬ ë° ì œí•œ ì‚¬í•­

| í•­ëª©           | ì²˜ë¦¬ ë°©ì‹                                       |
| -------------- | ----------------------------------------------- |
| ê³¡ ìƒì„± ì¤‘ë³µ   | `checkUserCreatingStatus()` â†’ ErrorModal í‘œì‹œ   |
| ìƒì„± íšŸìˆ˜ ì´ˆê³¼ | `createPossibleCount` ê²€ì‚¬ í›„ ë²„íŠ¼ ë¹„í™œì„±í™”     |
| ê°€ì‚¬ ê¸¸ì´ ì œí•œ | `selectedVersion !== 'V4_5'`ì¼ ê²½ìš° 1000ì ì œí•œ |
| API ì‹¤íŒ¨       | ì½˜ì†” ì—ëŸ¬ ë¡œê·¸ ë° ì‚¬ìš©ì í”¼ë“œë°± í•„ìš”            |

---

## 8. ì¶”ê°€ ì„¤ëª… ë° ì‹¤ì „ ì°¸ê³ 

### ì£¼ìš” ë³€ìˆ˜ ì„¤ëª…

| ë³€ìˆ˜ëª…            | ì„¤ëª…                                     |
| ----------------- | ---------------------------------------- |
| `pageNumber`      | í˜„ì¬ ë‹¨ê³„ (-1: ì‹œì‘, 0: ê°€ì‚¬, 1: ë©œë¡œë””) |
| `createMode`      | chatbot/select ì„ íƒ ëª¨ë“œ                 |
| `selectedVersion` | AI ìƒì„± ì—”ì§„ ì„ íƒ (ì˜ˆ: V4_5)             |
| `finalPrompt`     | ì˜ì–´ í”„ë¡¬í”„íŠ¸ (ìŒì•… ìƒì„±ì— ì‚¬ìš©ë¨)       |
| `albumCover`      | DALLÂ·Eë¡œ ìƒì„±ëœ ì•¨ë²” ì»¤ë²„ ì´ë¯¸ì§€ URL     |

## 9. í™˜ê²½ë³€ìˆ˜ ë° ì™¸ë¶€ API

| ë³€ìˆ˜ëª…                        | ì—­í•                   |
| ----------------------------- | --------------------- |
| `REACT_APP_OPENAI_API_KEY`    | OpenAI ì‚¬ìš© í‚¤        |
| `REACT_APP_CREATE_SERVER_API` | ê³¡ ìƒì„± API ì„œë²„ ì£¼ì†Œ |
| DALLÂ·E API                    | ì•¨ë²” ì»¤ë²„ ì´ë¯¸ì§€ ìƒì„± |
| jsPDF                         | ê°€ì‚¬ PDF ë³€í™˜ ê¸°ëŠ¥    |
